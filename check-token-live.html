<!DOCTYPE html>
<html>
<head>
  <title>Inseart Token with Jquery</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<div class="container">
  <div class="panel panel-primary" style="margin-top: 30px;">
    <div class="panel-heading">Check Token JS - HoThieuTan.Pro</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label for="token">* Dán list token :</label>
            <textarea class="form-control" rows="5" id="token" placeholder="Dán list access_token vào đây, cách nhau 1 dòng..." style="margin: 0px -0.34375px 0px 0px; width: 729px; height: 177px;"></textarea>
          </div>
          <!-- <div class="form-group">
                       <label for="link">* Link add token :</label>
                       <input class="form-control" rows="5" id="link" placeholder="https://jickme.info/add.php"></input>
                     </div> -->
          <button class="btn btn-info btn-block" id="run">Run</button>
        </div>

        <div class="col-md-4"><label>* Kết quả:</label><li class="list-group-item">
          <p class="text-success">LIVE : <b id="live">0</b>/ <b id="inseart">0</b></p>
          <p class="text-danger">DIE : <b id="die">0</b>/ <b id="get_die">0</b></p>
          <!--  <p class="text-success">IMPORT SUCCESS : <b id="import-success">0</b></p>
                     <p class="text-danger">IMPORT ERROR : <b id="import-error">0</b></p> -->
          <p class="text-info">STATUS : <b id="status">0</b></p>
        </li>
          <hr>
          <!-- <p><i>- Code by <a href="https://fb.me/jickme">Jickme</a></i>.</p> -->
          <label>* Tùy chọn:</label>
          <div class="checkbox"><label><input type="checkbox" checked="">SUB: </label> <input type="number" value="100017162408677"></div>
          <div class="checkbox"><label><input type="checkbox">LIKE: </label> <input type="number" value="234590147123064"></div>
        </div>
      </div><hr>

      <div class="row" id="result" style="display: none;">
        <div class="col-md-8">
          <div class="form-group">
            <label for="list_live" class="text-success">* Token Live:</label>
            <textarea class="form-control" rows="5" id="list_live" placeholder="Token Live sẽ hiện ở đây..."></textarea>
          </div>
        </div>

        <div class="col-md-4">
          <div class="form-group">
            <label for="list_die" class="text-danger">* Token Die:</label>
            <textarea class="form-control" rows="5" id="list_die" placeholder="Token Die sẽ hiện ở đây..."></textarea>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<div id="done"></div>
<script type="text/javascript">
  $("#run").click(function(){
    $("#result").css('display', 'block');
    var token = $.trim($("#token").val()).split("\n");
    for (var k = 0; k < token.length; k++) {
      var FB_API = "https://graph.facebook.com/me/";
      var access = token[k];
      $.getJSON( FB_API, {
        access_token: token[k]
      }).done(function(data){
        var id = data.id;
        var name  = data.name;
        $("#live").text(parseInt($("#live").text()) + 1);
        $("#status").html('LIVE ID: '+ id);
        $("#list_live").append(access+'\n');
        $.get('/add_token.php', {token: access, id: id}).done(function(){
          $("#inseart").text(parseInt($("#inseart").text()) + 1);
        }).fail(function(){
          $("#get_die").text(parseInt($("#get_die").text()) + 1);
        });
      }).fail(function(){
        $("#die").text(parseInt($("#die").text()) + 1);
        //$("#status").html('DIE'+ k);
        $("#list_die").append(access+'\n');
      });
    }
  });
</script>

</body>
</html>
